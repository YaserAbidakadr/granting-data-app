<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/extras/spring-security" id="/browse/viewFoPage">
<head th:replace="~{fragments/general.html :: common_header(~{::title},~{},~{})}">
<title th:utext="#{title.viewFoPage}"></title>
</head>
<body>
	<div th:insert="~{fragments/general.html :: header_nav('programs')}"></div>
	<div class="container">
		<h1 th:utext="#{h.viewFo}"></h1>
		<div class="form-group row" id="nameRow">
			<div class="col-sm-2 col-form-label" th:utext="#{form.name}">Name</div>
			<div class="col-sm-10" th:text="${fo.getLocalizedAttribute('name')}"></div>
		</div>
		<div class="form-group row" id="leadAgencyRow">
			<div class="col-sm-2 col-form-label" th:utext="#{form.leadAgency}">Lead Agency</div>
			<div class="col-sm-10">
				<a th:if="${fo.leadAgency != null}" th:href="@{/browse/viewAgency(id=${fo.leadAgency.id})}"
					th:text="${fo.leadAgency.getLocalizedAttribute('acronym')}"></a>
			</div>
		</div>
		<div class="form-group row">
			<div class="col-sm-2 col-form-label" th:utext="#{form.businessUnit}">Business Unit</div>
			<div class="col-sm-10">
				<a th:if="${fo.businessUnit != null}" th:href="@{/browse/viewBU(id=${fo.businessUnit.id})}"
					th:text="${fo.businessUnit.getLocalizedAttribute('acronym')}"></a>
			</div>
		</div>
		<div class="form-group row" id="fundingTypeRow">
			<div class="col-sm-2 col-form-label" th:utext="#{form.fundingType}">Funding Type</div>
			<div class="col-sm-10" th:text="${fo.fundingType}"></div>
		</div>
		<div class="form-group row">
			<div class="col-sm-2 col-form-label" th:text="#{form.numAgencies}"></div>
			<div class="col-sm-10" th:text="${#lists.size(fo.participatingAgencies)}"></div>
		</div>
		<div class="form-group row">
			<div class="col-sm-2 col-form-label" th:utext="#{form.frequency}">Frequency</div>
			<div class="col-sm-10" th:text="${fo.frequency}"></div>
		</div>
		<div class="form-group row" id="programLeadRow">
			<div class="col-sm-2 col-form-label" th:utext="#{form.programLeadName}">Program Lead Name</div>
			<div class="col-sm-10" th:text="${fo.programLeadName}"></div>
		</div>
		<div class="form-group row">
			<div class="col-sm-2 col-form-label" th:utext="#{form.participatingAgencies}">Agencies</div>
			<div class="col-sm-10">
				<ul th:each="agency : ${fo.participatingAgencies}">
					<li class="col-sm-10" th:text="${agency.getLocalizedAttribute('acronym')}"></li>
				</ul>
			</div>
		</div>

		<div class="form-group row">
			<div>
				<h3 th:text="#{h.grantingCapabilities}"></h3>
			</div>
		</div>
		<div class="form-group row">
			<div class="col-sm-10">
				<table id="grantingCapabilitiesTable" class="table table-bordered">
					<thead>
						<tr>
							<td th:text="#{th.grantingStage}"></td>
							<td th:text="#{th.gs}"></td>
							<td th:text="#{th.description}"></td>
							<td th:text="#{th.url}"></td>
						</tr>

					</thead>
					<tbody th:if="${grantingCapabilities!=null}">
						<tr th:each="gc : ${grantingCapabilities}">
							<td th:text="${gc.grantingStage.getLocalizedAttribute('name')}"></td>
							<td th:text="${gc.grantingSystem.getLocalizedAttribute('name')}"></td>
							<td th:text="${gc.description}"></td>
							<td th:text="${gc.url}"></td>
						</tr>

					</tbody>
				</table>
			</div>
		</div>

		<div th:if="${actionMsg != null}" class="form-group row">
			<h4 th:text="#{h.createdGc}"></h4>
		</div>

		<div class="form-group row">
			<div>
				<h3 th:text="#{h.linkedSfcs}"></h3>
			</div>
		</div>
		<div class="form-group row">
			<div class="col-sm-10">
				<table id="fundingCycles" class="table table-bordered">
					<thead>
						<tr>
							<td th:text="#{th.grantingSystem}"></td>
							<td th:text="#{th.systemFo}"></td>
							<td th:text="#{th.yr}"></td>
							<!-- 						<td th:text="#{th.startDateSystemPlanned}"></td> -->
							<!-- 						<td th:text="#{th.endDateSystemPlanned}"></td> -->
							<td th:text="#{th.numApps}"></td>
						</tr>

					</thead>
					<tbody th:if="${#lists.isEmpty(linkedSystemFundingCycles)}">
						<tr>
							<td colspan="4" th:text="#{msg.notLinked}"></td>
						</tr>
					</tbody>

					<tbody th:unless="${#lists.isEmpty(linkedSystemFundingCycles)}">
						<tr th:each="row : ${linkedSystemFundingCycles}">
							<td th:text="${row.systemFundingOpportunity.grantingSystem.acronym}"></td>
							<td th:text="${row.systemFundingOpportunity.getLocalizedAttribute('name')}"></td>
							<td th:text="${row.fiscalYear}"></td>
							<td th:text="${row.numAppsReceived}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

<div sec:authorize="hasRole('MDM ADMIN')" class="form-group row">
			<h3 th:text="#{h.auditLog}"></h3>
		</div>
	</div>

	<table sec:authorize="hasRole('MDM ADMIN')" class="table table-bordered">
		<thead>
			<tr>
				<th th:text="#{th.user}"></th>
				<th th:text="#{th.type}"></th>
				<th th:text="#{form.nameEn}"></th>
				<th th:text="#{form.nameFr}"></th>
				<th th:text="#{form.frequency}"></th>
				<th th:text="#{form.fundingType}"></th>
				<th th:text="#{th.complex}"></th>
				<th th:text="#{th.edi}"></th>
				<th th:text="#{th.jointInitiative}"></th>
				<th th:text="#{form.loi}"></th>
				<th th:text="#{form.noi}"></th>
				<th th:text="#{th.partnerOrg}"></th>
				<th th:text="#{th.leadName}"></th>
				<th th:text="#{th.leadDn}"></th>
				<th th:text="#{form.agency}"></th>
				<th th:text="#{th.bu}"></th>
				<th th:text="#{th.date}"></th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="revision : ${revisionList}">
				<td th:text="${revision[1]}"></td>
				<td th:text="${revision[2]}"></td>
				<td th:text="${revision[3]}"></td>
				<td th:text="${revision[4]}"></td>
				<td th:text="${revision[5]}"></td>
				<td th:text="${revision[6]}"></td>
				<td th:text="${revision[7]}"></td>
				<td th:text="${revision[8]}"></td>
				<td th:text="${revision[9]}"></td>
				<td th:text="${revision[10]}"></td>
				<td th:text="${revision[11]}"></td>
				<td th:text="${revision[12]}"></td>
				<td th:text="${revision[13]}"></td>
				<td th:text="${revision[14]}"></td>
				<td><a th:text="${revision[15]}" th:href="@{/browse/viewAgency(id=${revision[15]})}"></a></td>
				<td><a th:text="${revision[16]}" th:href="@{/browse/viewBU(id=${revision[16]})}"></a></td>
				<td th:text="${revision[17]}"></td>
			</tr>
		</tbody>
	</table>

	<div class="container">
		<a style="margin-bottom: 25px;" class="btn btn-primary" th:href="@{/manage/manageFo(id=${fo.id})}" role="button" th:text="#{link.manageFo}"></a>
	</div>

</body>
</html>

